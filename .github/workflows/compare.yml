name: datafusion sql fuzzing

on: [push, pull_request]

jobs:
  build:
    name: build datafusion cli
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          repository: apache/arrow-datafusion
          path: ./arrow-datafusion
          submodules: recursive

      - name: Show Working directory
        run: ls  

      - name: Pwd directory
        run: pwd  

      - name: Install Build Dependencies
        shell: bash
        run: |
          sudo apt-get update
          sudo apt-get install -y protobuf-compiler
      - name: Setup Rust toolchain
        shell: bash
        run: |
          echo "Installing ${{ inputs.rust-version }}"
          rustup toolchain install ${{ inputs.rust-version }}
          rustup default ${{ inputs.rust-version }}
          rustup component add rustfmt  
      - name: Build datafusion-cli
        run: (cd datafusion-cli && cargo build)    

      # - name: Install latest nightly
      #   uses: actions-rs/toolchain@v1
      #   with:
      #     toolchain: nightly
      #     override: true
      #     components: rustfmt, clippy

      # - name: Run cargo fmt
      #   uses: actions-rs/cargo@v1
      #   with:
      #     command: fmt
      #     args: -- --check

      # - name: Run cargo clippy
      #   uses: actions-rs/cargo@v1
      #   with:
      #     command: clippy
      #     args: -- -D warnings
